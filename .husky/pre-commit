#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# ZERO TOLERANCE - All checks must pass
echo "ğŸ”’ ARCHITECTURE VALIDATION - ZERO TOLERANCE"

# 1. Lint (ZERO warnings tolerated)
echo "ğŸ“‹ Running ESLint..."
pnpm lint --max-warnings 0 || exit 1

# 2. TypeScript (STRICT mode)
echo "ğŸ” TypeScript check..."
pnpm typecheck || exit 1

# 3. Build (Must succeed)
echo "ğŸ—ï¸ Building packages..."
pnpm build || exit 1

# 4. Tests (Must pass)
echo "ğŸ§ª Running tests..."
pnpm test || exit 1

# 5. Documentation validation
echo "ğŸ“š Validating documentation..."
pnpm docs:validate || exit 1

# 5.5. Architecture validation
echo "ğŸ—ï¸ Validating architecture..."
pnpm architecture:check || exit 1

# 6. Performance budget check
echo "âš¡ Performance budget check..."
pnpm build:muzisystem || exit 1

echo "âœ… All validations passed - Commit authorized"
